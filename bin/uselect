#!/usr/bin/env perl

use Modern::Perl;
use App::USelect::Selector;
use App::USelect::Display;
use autodie;

my @lines = <STDIN>;
open(STDIN, '<', '/dev/tty');
open my $stdout, '>&STDOUT';
open(STDOUT, '>', '/dev/tty');

sub selectable {
    my ($line) = @_;
    chomp $line;
    return ($line and not $line =~ /^\d+:/);
}

my $selector = App::USelect::Selector->new(
        text          => \@lines,
        is_selectable => \&selectable
    );

my $display = App::USelect::Display->new(selector => $selector);
$display->run;

print {$stdout} $selector->selection;
